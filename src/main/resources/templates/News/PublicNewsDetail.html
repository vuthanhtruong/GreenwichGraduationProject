<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${news.title}">News Detail</title>

    <!-- Icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="stylesheet" th:href="@{/NewsDetail.css}">
</head>

<body>
<div class="win11-container">

    <!-- Toolbar -->
    <div class="search-toolbar unified-bar">
        <div class="toolbar-left">
            <a th:href="@{/check-news}" class="btn home-btn">
                <i class="fas fa-arrow-left"></i> Back to News
            </a>

            <h2 class="page-title">
                <i class="fas fa-newspaper"></i> News Detail
            </h2>
        </div>
    </div>

    <div class="detail-container">

        <!-- Header -->
        <div class="detail-header">
            <h1 class="detail-title" th:text="${news.title}">Title</h1>

            <div class="detail-meta">
                <span class="author"
                      th:text="${news.creator?.firstName + ' ' + news.creator?.lastName}">
                    Staff
                </span>

                <span class="date"
                      th:text="${#temporals.format(news.createdAt,'dd MMMM yyyy')}">
                    01 Jan 2024
                </span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="detail-content" th:utext="${news.content}">
            News content...
        </div>

        <!-- Attachments -->
        <section class="file-section">

            <h3 class="section-title">
                <i class="fas fa-paperclip"></i> Attachments
            </h3>

            <div th:if="${news.documents != null and !news.documents.isEmpty()}"
                 class="file-list">

                <div th:each="doc : ${news.documents}" class="file-item">

                    <div class="file-info">
                        <i class="fas fa-file-alt file-icon"></i>
                        <span th:text="${doc.documentTitle}">document.pdf</span>
                    </div>

                    <a th:href="@{'/check-news/download/' + ${doc.documentId}}"
                       class="btn small primary">
                        <i class="fas fa-download"></i> Download
                    </a>
                </div>
            </div>

            <div th:unless="${news.documents != null and !news.documents.isEmpty()}"
                 class="no-data">
                <p>No attachments.</p>
            </div>

        </section>

        <!-- Comments Section -->
        <section class="comments-section">

            <div class="comments-header">
                <h3>
                    <i class="fas fa-comments"></i> Comments
                </h3>

                <span class="comment-count"
                      th:text="${#lists.size(news.comments)} + ' comment(s)'">
                    0 comment(s)
                </span>
            </div>

            <!-- Comment Form -->
            <form class="comment-form"
                  th:action="@{/check-news/comment}"
                  method="post">

                <input type="hidden" name="postId" th:value="${news.postId}">

                <textarea name="content"
                          placeholder="Write your comment..."
                          minlength="5"
                          maxlength="1000"
                          required></textarea>

                <div th:if="${error}" class="error" th:text="${error}">Error</div>

                <button type="submit" class="btn primary">
                    <i class="fas fa-paper-plane"></i> Post Comment
                </button>
            </form>

            <!-- Comment List -->
            <div class="comment-list"
                 th:if="${news.comments != null and !news.comments.isEmpty()}">

                <div th:each="c : ${news.comments}" class="comment-item">

                    <div class="comment-meta">
                        <span class="comment-author"
                              th:text="${c.commenter?.fullName}">
                            Anonymous
                        </span>

                        <span class="comment-date"
                              th:text="${#temporals.format(c.createdAt,'dd MMM yyyy HH:mm')}">
                            Time
                        </span>
                    </div>

                    <div class="comment-content" th:text="${c.content}">
                        Comment content...
                    </div>

                </div>
            </div>

            <!-- No comments -->
            <div th:unless="${news.comments != null and !news.comments.isEmpty()}"
                 class="no-data">
                <p>No comments yet. Be the first!</p>
            </div>

        </section>

    </div>
</div>

</body>
</html>
